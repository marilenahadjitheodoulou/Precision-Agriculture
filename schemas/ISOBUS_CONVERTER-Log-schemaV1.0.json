{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "definitions": {
        "TimeLog":{
            "type":"object",
            "properties": {
                "DeviceDesignator" : {
                    "type":"string",
                    "maxLength":32
                },
                "DeviceStructureLabel" : {
                    "type":"string",
                    "minLength":2,
                    "maxLength":14,
                    "pattern": "^([a-fA-F0-9]{2})$+"
                },
                "Start": {
                    "type":"integer"
                },
                "Stop": {
                    "type":"integer"
				},
				"Duration": {
                    "type":"integer"
                },
                "TimeSequences" : {
                    "type":"array",
                    "items": {
                        "ref":"#/definitions/TimeSequence"
                    }
                }
            },
            "additionalProperties": false,
            "required": [
                "DeviceStructureLabel",
                "TimeSequences"
            ]
        },
        "TimeSequence" :{
            "type":"object",
            "properties": {
                "Start": {
                    "type":"integer"
                },
                "Stop": {
                    "type":"integer"
                },
                "Position":{
					"type": "array",
					"description": "NMEA2000 parameters",
                    "items":
                    {
                        "type":"object",
                        "properties": {
                            "PositionNorth":{
                                "type":"number",
                                "description": "GPS position north WGS84",
                                "minimum": -90.0,
                                "maximum": 90.0
                            },
                            "PositionEast":{
                                "type":"number",
                                "description": "GPS position east WGS84",
                                "minimum": -180.0,
                                "maximum": 180.0
                            },
                            "PositionUp": {
                                "type":"integer",
                                "description": "GPS position altitude WGS84 ellipsoid in mm",
                                "minimum": -2147483648,
                                "maximum": 2147483647
                            },
                            "PositionStatus": {
                                "type":"integer",
                                "description": "Position status. Definition references NMEA2000 MethodGNSS parameter.\n 0 = no GPS fix\n 1 = GNSS fix\n 2 = DGNSS fix\n 3 = Precise GNSS, no deliberate degradation (such as SA), and higher resolution code (P-code) and 2 frequencies are used to correct atmospheric delays\n 4 = RTK fixed integer\n 5 = RTK float\n 6 = Est(DR)mode\n 7 = Manual input\n 8 = Simulate mode\n 9â€“13 = Reserved\n 14 = Error 15 = PositionStatus value is not available",
                                "minimum": 0,
                                "maximum": 15
                            },
                            "PDOP": {
								"type":"number",
								"description": "position (3D) dilution of precision",
                                "minimum": 0.0,
                                "maximum": 99.9
							},
                            "HDOP": {
								"type":"number",
								"description": " horizontal dilution of precision",
                                "minimum": 0.0,
                                "maximum": 99.9
                            },
                            "NumberOfSatellites":{
                                "type":"integer",
                                "minimum": 0,
                                "maximum": 254
                            },
                            "GpsUtcTime":{
                                "type":"integer",
                                "description": "UTC time in milliseconds since midnight",
                                "minimum": 0,
                                "maximum": 4294967294
                            },
                            "GpsUtcDate":{
                                "type":"integer",
                                "description": "UTC date in days relative to 1980-01-01",
                                "minimum": 0,
                                "maximum": 65534
                            }
                        },
                        "additionalProperties": false,
                        "required":[
                            "PositionStatus",
                            "PositionNorth",
                            "PositionEast"
                        ]
                    }
                },
                "DataLogValues":{
                    "type": "array",
                    "items":
                    {
                        "type":"object",
                        "properties": {
                            "DataValue":{
                                "type":"number"
                            },
                            "UoM":{
                                "type": "string",
                                "maxLength": 32
                            },
                            "DataValueDesignator":{
                            	"type": "string",
                                "maxLength": 32
                            }
                        }
                    }
                }
            },
            "additionalProperties": false,
            "required":[
                "Start",
                "Stop",
                "Positions",
                "DataLogValues"
            ]
        }
    },
    "type": "object",
    "properties":
    {
        "Task": {
            "type": "array",
            "uniqueItems": true,
            "items": [
                {
                    "type": "object",
                    "properties": {
                        "TaskId": {
                            "type": "string",
                            "minLength": 4,
                            "maxLength": 14,
                            "pattern": "^(TSK|TSK-)[0-9]{1,11}"
                        },
                        "TaskDesignator": {
                            "type": "string",
                            "maxLength": 32
                        },
                        "CustomerIdRef": {
                            "type": "string",
                            "minLength": 4,
                            "maxLength": 14,
                            "pattern": "^(CTR|CTR-)[0-9]{1,11}"
                        },
                        "FarmIdRef": {
                            "type": "string",
                            "minLength": 4,
                            "maxLength": 14,
                            "pattern": "^(FRM|FRM-)[0-9]{1,11}"
                        },
                        "PartFieldIdRef": {
                            "type": "string",
                            "minLength": 4,
                            "maxLength": 14,
                            "pattern": "^(PFD|PFD-)[0-9]{1,11}"
                        },
                        "TaskStatus": {
                            "type":"integer",
                            "description": "Status of the task, possible values:\n1 = planned\n2 = running\n3 = paused\n4 = completed\n5 = template\n6 = canceled"
                        },
                        "TimeLog": {
                            "type":"array",
                            "items":{
                                "anyOf":[
                                    {
                                        "ref":"#/definitions/TimeSequence"
                                    },
                                    {
                                        "ref":"#/definitions/TimeLog"
                                    }
                                ]
                            }
                        }
                    },
                    "additionalProperties": true,
                    "required": [
                        "TaskId",
                        "TaskStatus"
                    ]
                }
            ]
        }
    }
}
